<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Create Material</title>
    <link href="https://kendo.cdn.telerik.com/2025.2.621/styles/kendo.default-v2.min.css" rel="stylesheet" />
    <!-- jQuery must come first -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Then Kendo -->
    <script src="https://kendo.cdn.telerik.com/2025.2.621/js/kendo.all.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-container { width: 500px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, textarea, select { width: 100%; padding: 6px; box-sizing: border-box; }
        .btn-submit { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>Create New Material</h2>
        <div class="form-group">
            <label for="name">Name</label>
            <input id="name" />
        </div>
        <div class="form-group">
            <label for="category">Category</label>
            <input id="category" />
        </div>
        <div class="form-group">
            <label for="brand">Brand</label>
            <input id="brand" />
        </div>
        <div class="form-group">
            <label for="unitPrice">Unit Price</label>
            <input id="unitPrice" />
        </div>
        <div class="form-group">
            <label for="unitOfMeasure">Unit of Measure</label>
            <input id="unitOfMeasure" />
        </div>
        <div class="form-group">
            <label for="inStockQty">In Stock Quantity</label>
            <input id="inStockQty" />
        </div>
        <div class="form-group">
            <label for="reorderLevel">Reorder Level</label>
            <input id="reorderLevel" />
        </div>
        <div class="form-group">
            <label for="gstPercent">GST %</label>
            <input id="gstPercent" />
        </div>
        <div class="form-group">
            <label for="isActive">Active</label>
            <select id="isActive">
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="addedOn">Added On</label>
            <input id="addedOn" />
        </div>

        <button class="k-button k-primary btn-submit" id="saveBtn">Save Material</button>
    </div>

    <script>
        $(document).ready(function() {
            // Initialize Kendo controls
            
            $("#addedOn").kendoDatePicker({ format: "yyyy-MM-dd" });

            $("#saveBtn").click(function() {
                const material = {
                    name: $("#name").val(),
                    category: $("#category").val(),
                    brand: $("#brand").val(),
                    unitPrice: parseFloat($("#unitPrice").val()),
                    unitOfMeasure: $("#unitOfMeasure").val(),
                    inStockQty: parseInt($("#inStockQty").val()),
                    reorderLevel: parseInt($("#reorderLevel").val()),
                    gstPercent: parseFloat($("#gstPercent").val()),
                    isActive: $("#isActive").val() === "true",
                    addedOn: $("#addedOn").val()
                };

                // Basic validation
                if (!material.name || !material.category) {
                    alert("Please fill in all required fields.");
                    return;
                }

                // Send data via AJAX POST
                $.ajax({
                    url: '/api/materials',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(material),
                    success: function(response) {
                        alert("Material saved successfully!");
                        window.location.href = "/pages/list.html"; // Redirect to list page
                    },
                    error: function(xhr, status, error) {
                        console.error(error);
                        alert("Error saving material. Check console for details.");
                    }
                });
            });
        });
    </script>
</body>
</html>
